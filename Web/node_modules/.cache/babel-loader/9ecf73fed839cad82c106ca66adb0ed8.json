{"remainingRequest":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\babel-loader\\lib\\index.js!E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-module-admin\\src\\views\\role\\components\\menu-bind\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-module-admin\\src\\views\\role\\components\\menu-bind\\index.vue","mtime":1706623138837},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\babel.config.js","mtime":1706609443763},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\babel-loader\\lib\\index.js","mtime":1706623138119},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js","mtime":1706623133543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIG1lbnVBcGkgPSAkYXBpLmFkbWluLm1lbnU7CnZhciBfJGFwaSRhZG1pbiRyb2xlID0gJGFwaS5hZG1pbi5yb2xlLAogIF9xdWVyeUJpbmRNZW51cyA9IF8kYXBpJGFkbWluJHJvbGUucXVlcnlCaW5kTWVudXMsCiAgYmluZE1lbnVzID0gXyRhcGkkYWRtaW4kcm9sZS5iaW5kTWVudXM7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIG1lbnVUcmVlOiB7CiAgICAgICAgZGF0YTogW10sCiAgICAgICAgbm9kZUtleTogJ2lkJywKICAgICAgICAnZXhwYW5kLW9uLWNsaWNrLW5vZGUnOiBmYWxzZSwKICAgICAgICAnZGVmYXVsdC1leHBhbmQtYWxsJzogdHJ1ZSwKICAgICAgICAnc2hvdy1jaGVja2JveCc6IHRydWUKICAgICAgfSwKICAgICAgbWVudXM6IFtdCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIC8v6KeS6ImySUQKICAgIGlkOiBTdHJpbmcKICB9LAogIG1ldGhvZHM6IHsKICAgIHF1ZXJ5TWVudVRyZWU6IGZ1bmN0aW9uIHF1ZXJ5TWVudVRyZWUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIG1lbnVBcGkuZ2V0VHJlZSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpcy5tZW51VHJlZS5kYXRhID0gW2RhdGFdOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgcXVlcnlCaW5kTWVudXM6IGZ1bmN0aW9uIHF1ZXJ5QmluZE1lbnVzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5tZW51cyA9IFtdOwogICAgICBpZiAodGhpcy5pZCkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgX3F1ZXJ5QmluZE1lbnVzKHRoaXMuaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIF90aGlzMi5tZW51cyA9IGRhdGE7CiAgICAgICAgICBfdGhpczIucmVzZXQoKTsKICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIG1vZGVsID0gewogICAgICAgIHJvbGVJZDogdGhpcy5pZCwKICAgICAgICBtZW51czogdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWRLZXlzKCkuY29uY2F0KHRoaXMuJHJlZnMudHJlZS5nZXRIYWxmQ2hlY2tlZEtleXMoKSkKICAgICAgfTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgYmluZE1lbnVzKG1vZGVsKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuX3N1Y2Nlc3MoJ+S/neWtmOaIkOWKnycpOwogICAgICAgIF90aGlzMy5tZW51cyA9IG1vZGVsLm1lbnVzOwogICAgICAgIF90aGlzMy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuJHJlZnMudHJlZS5zZXRDaGVja2VkS2V5cyhfdGhpczQubWVudXMpOwogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnF1ZXJ5TWVudVRyZWUoKTsKICAgIHRoaXMucXVlcnlCaW5kTWVudXMoKTsKICB9LAogIHdhdGNoOiB7CiAgICBpZDogZnVuY3Rpb24gaWQoKSB7CiAgICAgIC8v5bu26L+f5Yqg6L2977yM6Ziy5q2i5peg5rOV5riy5p+T5bey6YCJ5oup55qE5pWw5o2uCiAgICAgIHNldFRpbWVvdXQodGhpcy5xdWVyeUJpbmRNZW51cywgMTAwKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["menuApi","$api","admin","menu","_$api$admin$role","role","queryBindMenus","bindMenus","data","loading","menuTree","nodeKey","menus","props","id","String","methods","queryMenuTree","_this","getTree","then","_this2","reset","save","_this3","model","roleId","$refs","tree","getCheckedKeys","concat","getHalfCheckedKeys","_success","_this4","$nextTick","setCheckedKeys","created","watch","setTimeout"],"sources":["node_modules/netmodular-module-admin/src/views/role/components/menu-bind/index.vue"],"sourcesContent":["<template>\r\n  <nm-box page :header=\"false\" footer :loading=\"loading\">\r\n    <el-alert title=\"提示\" type=\"warning\" class=\"nm-m-b-10\" description=\"路由菜单基于页面配置，同一个页面可以配置任意个菜单\" show-icon> </el-alert>\r\n    <el-tree ref=\"tree\" class=\"nm-admin-role-menus-tree\" v-bind=\"menuTree\">\r\n      <div class=\"nm-admin-role-menus-tree-node\" slot-scope=\"{ data }\">\r\n        <span class=\"nm-admin-role-menus-tree-node-label\"><nm-icon :name=\"data.item.icon || 'attachment'\" /> {{ data.label }}</span>\r\n      </div>\r\n    </el-tree>\r\n\r\n    <template v-slot:footer>\r\n      <nm-button type=\"success\" text=\"保存\" @click=\"save\" />\r\n      <nm-button type=\"info\" text=\"重置\" @click=\"reset\" />\r\n    </template>\r\n  </nm-box>\r\n</template>\r\n<script>\r\nconst menuApi = $api.admin.menu\r\nconst { queryBindMenus, bindMenus } = $api.admin.role\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      menuTree: {\r\n        data: [],\r\n        nodeKey: 'id',\r\n        'expand-on-click-node': false,\r\n        'default-expand-all': true,\r\n        'show-checkbox': true\r\n      },\r\n      menus: []\r\n    }\r\n  },\r\n  props: {\r\n    //角色ID\r\n    id: String\r\n  },\r\n  methods: {\r\n    queryMenuTree() {\r\n      this.loading = true\r\n      menuApi.getTree().then(data => {\r\n        this.menuTree.data = [data]\r\n        this.loading = false\r\n      })\r\n    },\r\n    queryBindMenus() {\r\n      this.menus = []\r\n      if (this.id) {\r\n        this.loading = true\r\n        queryBindMenus(this.id).then(data => {\r\n          this.menus = data\r\n          this.reset()\r\n          this.loading = false\r\n        })\r\n      }\r\n    },\r\n    save() {\r\n      let model = {\r\n        roleId: this.id,\r\n        menus: this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys())\r\n      }\r\n      this.loading = true\r\n      bindMenus(model).then(() => {\r\n        this._success('保存成功')\r\n        this.menus = model.menus\r\n        this.loading = false\r\n      })\r\n    },\r\n    reset() {\r\n      this.$nextTick(() => {\r\n        this.$refs.tree.setCheckedKeys(this.menus)\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.queryMenuTree()\r\n    this.queryBindMenus()\r\n  },\r\n  watch: {\r\n    id() {\r\n      //延迟加载，防止无法渲染已选择的数据\r\n      setTimeout(this.queryBindMenus, 100)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"AAgBA,IAAAA,OAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,IAAA;AACA,IAAAC,gBAAA,GAAAH,IAAA,CAAAC,KAAA,CAAAG,IAAA;EAAAC,eAAA,GAAAF,gBAAA,CAAAE,cAAA;EAAAC,SAAA,GAAAH,gBAAA,CAAAG,SAAA;AACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;QACAF,IAAA;QACAG,OAAA;QACA;QACA;QACA;MACA;MACAC,KAAA;IACA;EACA;EACAC,KAAA;IACA;IACAC,EAAA,EAAAC;EACA;EACAC,OAAA;IACAC,aAAA,WAAAA,cAAA;MAAA,IAAAC,KAAA;MACA,KAAAT,OAAA;MACAT,OAAA,CAAAmB,OAAA,GAAAC,IAAA,WAAAZ,IAAA;QACAU,KAAA,CAAAR,QAAA,CAAAF,IAAA,IAAAA,IAAA;QACAU,KAAA,CAAAT,OAAA;MACA;IACA;IACAH,cAAA,WAAAA,eAAA;MAAA,IAAAe,MAAA;MACA,KAAAT,KAAA;MACA,SAAAE,EAAA;QACA,KAAAL,OAAA;QACAH,eAAA,MAAAQ,EAAA,EAAAM,IAAA,WAAAZ,IAAA;UACAa,MAAA,CAAAT,KAAA,GAAAJ,IAAA;UACAa,MAAA,CAAAC,KAAA;UACAD,MAAA,CAAAZ,OAAA;QACA;MACA;IACA;IACAc,IAAA,WAAAA,KAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,KAAA;QACAC,MAAA,OAAAZ,EAAA;QACAF,KAAA,OAAAe,KAAA,CAAAC,IAAA,CAAAC,cAAA,GAAAC,MAAA,MAAAH,KAAA,CAAAC,IAAA,CAAAG,kBAAA;MACA;MACA,KAAAtB,OAAA;MACAF,SAAA,CAAAkB,KAAA,EAAAL,IAAA;QACAI,MAAA,CAAAQ,QAAA;QACAR,MAAA,CAAAZ,KAAA,GAAAa,KAAA,CAAAb,KAAA;QACAY,MAAA,CAAAf,OAAA;MACA;IACA;IACAa,KAAA,WAAAA,MAAA;MAAA,IAAAW,MAAA;MACA,KAAAC,SAAA;QACAD,MAAA,CAAAN,KAAA,CAAAC,IAAA,CAAAO,cAAA,CAAAF,MAAA,CAAArB,KAAA;MACA;IACA;EACA;EACAwB,OAAA,WAAAA,QAAA;IACA,KAAAnB,aAAA;IACA,KAAAX,cAAA;EACA;EACA+B,KAAA;IACAvB,EAAA,WAAAA,GAAA;MACA;MACAwB,UAAA,MAAAhC,cAAA;IACA;EACA;AACA"}]}