{"remainingRequest":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-ui\\packages\\components\\list-agile\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-ui\\packages\\components\\list-agile\\index.vue","mtime":1706623144425},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\babel-loader\\lib\\index.js","mtime":1706623138119},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js","mtime":1706623133543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgUXVlcnlIZWFkZXIgZnJvbSAnLi4vbGlzdC9jb21wb25lbnRzL2hlYWRlcicNCmltcG9ydCBRdWVyeWJhciBmcm9tICcuLi9saXN0L2NvbXBvbmVudHMvcXVlcnliYXInDQppbXBvcnQgUXVlcnlUYWJsZSBmcm9tICcuLi9saXN0L2NvbXBvbmVudHMvdGFibGUnDQppbXBvcnQgUXVlcnlGb290ZXIgZnJvbSAnLi4vbGlzdC9jb21wb25lbnRzL2Zvb3RlcicNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnTGlzdEFnaWxlJywNCiAgY29tcG9uZW50czogeyBRdWVyeUhlYWRlciwgUXVlcnliYXIsIFF1ZXJ5VGFibGUsIFF1ZXJ5Rm9vdGVyIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxvYWRpbmdfOiBmYWxzZSwNCiAgICAgIGZ1bGxzY3JlZW46IGZhbHNlLA0KICAgICAgLy8g5YiG6aG15pWw5o2uDQogICAgICBwYWdlOiB7DQogICAgICAgIGluZGV4OiAxLA0KICAgICAgICBzaXplOiAxNSwNCiAgICAgICAgc29ydDogW10NCiAgICAgIH0sDQogICAgICAvLyDmlbDmja7liJfooagNCiAgICAgIHJvd3M6IFtdLA0KICAgICAgLy8g5oC75pWw6YePDQogICAgICB0b3RhbDogMCwNCiAgICAgIHNlbGVjdGlvbjogW10NCiAgICB9DQogIH0sDQogIHByb3BzOiB7DQogICAgLyoqIOagh+mimCAqLw0KICAgIHRpdGxlOiBTdHJpbmcsDQogICAgLyoqIOWbvuaghyAqLw0KICAgIGljb246IFN0cmluZywNCiAgICAvLyDmn6Xor6Lmlrnms5UNCiAgICBhY3Rpb246IHsNCiAgICAgIHR5cGU6IEZ1bmN0aW9uLA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9LA0KICAgIC8qKiDmn6Xor6LooajljZXovpPlhaXmoYblrr3luqYgKi8NCiAgICBpbnB1dFdpZHRoOiBTdHJpbmcsDQogICAgLy8g5qih5Z6LDQogICAgbW9kZWw6IE9iamVjdCwNCiAgICAvKiog5qih5Z6L6aqM6K+B6KeE5YiZICovDQogICAgcnVsZXM6IE9iamVjdCwNCiAgICAvKiog6auY57qn5p+l6K+iICovDQogICAgYWR2YW5jZWQ6IE9iamVjdCwNCiAgICAvKiog5aSa6YCJICovDQogICAgbXVsdGlwbGU6IEJvb2xlYW4sDQogICAgLyoqIOaYvuekuuW6j+WPtyAqLw0KICAgIHNob3dObzogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9LA0KICAgIC8qKiDkuI3mmL7npLrmk43kvZzliJcgKi8NCiAgICBub09wZXJhdGlvbjogQm9vbGVhbiwNCiAgICAvKiog5pON5L2c5YiX5a695bqmICovDQogICAgb3BlcmF0aW9uV2lkdGg6IFtTdHJpbmcsIE51bWJlcl0sDQogICAgLyoqIOS4jeaYvuekuuafpeivouagjyAqLw0KICAgIG5vUXVlcnliYXI6IEJvb2xlYW4sDQogICAgLyoqIOS4jeaYvuekuuWFqOWxj+aMiemSriAqLw0KICAgIG5vRnVsbHNjcmVlbjogQm9vbGVhbiwNCiAgICAvKiog5LiN5pi+56S65Yi35paw5oyJ6ZKuICovDQogICAgbm9SZWZyZXNoOiBCb29sZWFuLA0KICAgIC8qKiDkuI3mmL7npLrlpLTpg6ggKi8NCiAgICBub0hlYWRlcjogQm9vbGVhbiwNCiAgICAvKiog5LiN5pi+56S65bqV6YOoICovDQogICAgbm9Gb290ZXI6IEJvb2xlYW4sDQogICAgLyoqIOS4jeWMheWQq+aQnOe0ouWKn+iDvSAqLw0KICAgIG5vU2VhcmNoOiBCb29sZWFuLA0KICAgIC8qKiDkuI3mmL7npLrmn6Xor6LmjInpkq7lm77moIcgKi8NCiAgICBub1NlYXJjaEJ1dHRvbkljb246IEJvb2xlYW4sDQogICAgLyoqIOW6lemDqOWPjei9rCAqLw0KICAgIGZvb3RlclJldmVyc2U6IEJvb2xlYW4sDQogICAgLyoqIOWQiOW5tuihjOWIl+eahOaWueazlSAqLw0KICAgIHNwYW5NZXRob2Q6IEZ1bmN0aW9uLA0KICAgIC8qKiDliqDovb3kuK3liqjnlLsgKi8NCiAgICBsb2FkaW5nOiBCb29sZWFuLA0KICAgIC8qKiDliqDovb3kuK3mlofmnKwgKi8NCiAgICBsb2FkaW5nVGV4dDogU3RyaW5nLA0KICAgIC8qKiDliJvlu7rlkI7miafooYzkuIDmrKHmn6Xor6IgKi8NCiAgICBxdWVyeU9uQ3JlYXRlZDogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoJ2FwcC9sb2FkaW5nJywgeyBsb2FkaW5nVGV4dF86ICd0ZXh0JywgbG9hZGluZ0JhY2tncm91bmQ6ICdiYWNrZ3JvdW5kJywgbG9hZGluZ1NwaW5uZXI6ICdzcGlubmVyJyB9KSwNCiAgICBjbGFzc18oKSB7DQogICAgICByZXR1cm4gWydubS1saXN0JywgdGhpcy5mb250U2l6ZSA/IGBubS1saXN0LSR7dGhpcy5mb250U2l6ZX1gIDogJycsIHRoaXMuZnVsbHNjcmVlbiA/ICdmdWxsc2NyZWVuJyA6ICcnXQ0KICAgIH0sDQogICAgcXVlcnliYXIoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCwNCiAgICAgICAgcnVsZXM6IHRoaXMucnVsZXMsDQogICAgICAgIGlucHV0V2lkdGg6IHRoaXMuaW5wdXRXaWR0aCwNCiAgICAgICAgYWR2YW5jZWQ6IHRoaXMuYWR2YW5jZWQsDQogICAgICAgIG5vU2VhcmNoOiB0aGlzLm5vU2VhcmNoLA0KICAgICAgICBub1NlYXJjaEJ1dHRvbkljb246IHRoaXMubm9TZWFyY2hCdXR0b25JY29uDQogICAgICB9DQogICAgfSwNCiAgICBzaG93TG9hZGluZygpIHsNCiAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgfHwgdGhpcy5sb2FkaW5nXw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8qKiDmn6Xor6Lmlrnms5UgKi8NCiAgICBxdWVyeSgpIHsNCiAgICAgIGlmICh0aGlzLmxvYWRpbmdfKSB7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KDQogICAgICB0aGlzLmxvYWRpbmdfID0gdHJ1ZQ0KICAgICAgbGV0IGZ1bGxNb2RlbCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMubW9kZWwpDQoNCiAgICAgIC8vIOiuvue9ruWIhumhtQ0KICAgICAgZnVsbE1vZGVsLnBhZ2UgPSB0aGlzLnBhZ2UNCg0KICAgICAgdGhpcy5hY3Rpb24oZnVsbE1vZGVsKQ0KICAgICAgICAudGhlbihkYXRhID0+IHsNCiAgICAgICAgICB0aGlzLnJvd3MgPSBkYXRhLnJvd3MNCiAgICAgICAgICB0aGlzLnRvdGFsID0gZGF0YS50b3RhbA0KICAgICAgICAgIC8vIOWbnuWIsOmhtumDqA0KICAgICAgICAgIHRoaXMuJHJlZnMudGFibGUuc2Nyb2xsVG9wKCkNCiAgICAgICAgICAvLyDph43mlrDnu5jliLbluIPlsYANCiAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlLmRvTGF5b3V0KCkNCiAgICAgICAgICB0aGlzLmxvYWRpbmdfID0gZmFsc2UNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmxvYWRpbmdfID0gZmFsc2UNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDliLfmlrAgKi8NCiAgICByZWZyZXNoKCkgew0KICAgICAgdGhpcy5wYWdlLmluZGV4ID0gMQ0KICAgICAgdGhpcy5xdWVyeSgpDQogICAgfSwNCiAgICAvKiog5p+l6K+i6KGo5Y2V6YeN572uICovDQogICAgcmVzZXQoZnJvbSkgew0KICAgICAgaWYgKCFmcm9tKSB7DQogICAgICAgIHRoaXMuJHJlZnMucXVlcnliYXIucmVzZXQoKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kcmVmcy50YWJsZS5jbGVhclNvcnQoKQ0KICAgICAgICB0aGlzLnBhZ2UuaW5kZXggPSAxDQogICAgICB9DQogICAgfSwNCiAgICAvKiog6I635Y+W5bqP5Y+3ICovDQogICAgZ2V0Tm8oaW5kZXgpIHsNCiAgICAgIHJldHVybiAodGhpcy5wYWdlLmluZGV4IC0gMSkgKiB0aGlzLnBhZ2Uuc2l6ZSArIGluZGV4ICsgMQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBpZiAodGhpcy5xdWVyeU9uQ3JlYXRlZCkgew0KICAgICAgdGhpcy5xdWVyeSgpDQogICAgfQ0KICB9LA0KICBhY3RpdmF0ZWQoKSB7DQogICAgLy8g6YeN5paw57uY5Yi25biD5bGADQogICAgdGhpcy4kcmVmcy50YWJsZS5kb0xheW91dCgpDQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAgEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/netmodular-ui/packages/components/list-agile","sourcesContent":["<template>\r\n  <section :class=\"class_\" v-loading=\"showLoading\" :element-loading-text=\"loadingText || loadingText_\" :element-loading-background=\"loadingBackground\" :element-loading-spinner=\"loadingSpinner\">\r\n    <!--header-->\r\n    <query-header v-if=\"!noHeader\" :title=\"title\" :icon=\"icon\" :no-fullscreen=\"noFullscreen\" :fullscreen.sync=\"fullscreen\" :no-refresh=\"noRefresh\">\r\n      <template v-slot:toolbar>\r\n        <slot name=\"header-toolbar\" :total=\"total\" :selection=\"selection\" />\r\n      </template>\r\n    </query-header>\r\n\r\n    <!--查询栏-->\r\n    <querybar ref=\"querybar\" v-if=\"!noQuerybar\" v-bind=\"querybar\">\r\n      <template v-slot>\r\n        <slot name=\"querybar\" />\r\n      </template>\r\n      <template v-slot:buttons>\r\n        <slot name=\"querybar-buttons\" :total=\"total\" :selection=\"selection\" />\r\n      </template>\r\n      <template v-slot:advanced>\r\n        <slot name=\"querybar-advanced\" />\r\n      </template>\r\n    </querybar>\r\n\r\n    <section class=\"nm-list-body\">\r\n      <query-table ref=\"table\" :rows=\"rows\" :span-method=\"spanMethod\" :selection.sync=\"selection\">\r\n        <!-- 多选 -->\r\n        <el-table-column v-if=\"multiple\" fixed=\"left\" align=\"center\" type=\"selection\" width=\"55\" />\r\n\r\n        <!-- 序号 -->\r\n        <el-table-column v-if=\"showNo\" fixed=\"left\" align=\"center\" type=\"index\" :index=\"getNo\">\r\n          <template v-slot:header>\r\n            <slot name=\"col-no-header\">序号</slot>\r\n          </template>\r\n          <template slot-scope=\"{ row, $index }\">\r\n            <div class=\"nm-list-no\">\r\n              <slot name=\"col-no\" :row=\"row\">{{ getNo($index) }}</slot>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!--表格主体-->\r\n        <slot name=\"tbody\"></slot>\r\n\r\n        <!-- 操作列 -->\r\n        <el-table-column v-if=\"!noOperation\" :width=\"operationWidth\" fixed=\"right\" align=\"center\" label=\"操作\">\r\n          <template v-slot:header>\r\n            <slot name=\"col-operation-header\">操作</slot>\r\n          </template>\r\n          <template slot-scope=\"{ row }\">\r\n            <div class=\"nm-list-operation\">\r\n              <slot name=\"col-operation\" :row=\"row\" />\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </query-table>\r\n    </section>\r\n\r\n    <!--footer-->\r\n    <query-footer v-if=\"!noFooter\" v-model=\"page\" :total=\"total\" no-select-column :reverse=\"footerReverse\">\r\n      <slot name=\"footer\" :total=\"total\" :selection=\"selection\" />\r\n    </query-footer>\r\n    <slot />\r\n  </section>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport QueryHeader from '../list/components/header'\r\nimport Querybar from '../list/components/querybar'\r\nimport QueryTable from '../list/components/table'\r\nimport QueryFooter from '../list/components/footer'\r\n\r\nexport default {\r\n  name: 'ListAgile',\r\n  components: { QueryHeader, Querybar, QueryTable, QueryFooter },\r\n  data() {\r\n    return {\r\n      loading_: false,\r\n      fullscreen: false,\r\n      // 分页数据\r\n      page: {\r\n        index: 1,\r\n        size: 15,\r\n        sort: []\r\n      },\r\n      // 数据列表\r\n      rows: [],\r\n      // 总数量\r\n      total: 0,\r\n      selection: []\r\n    }\r\n  },\r\n  props: {\r\n    /** 标题 */\r\n    title: String,\r\n    /** 图标 */\r\n    icon: String,\r\n    // 查询方法\r\n    action: {\r\n      type: Function,\r\n      required: true\r\n    },\r\n    /** 查询表单输入框宽度 */\r\n    inputWidth: String,\r\n    // 模型\r\n    model: Object,\r\n    /** 模型验证规则 */\r\n    rules: Object,\r\n    /** 高级查询 */\r\n    advanced: Object,\r\n    /** 多选 */\r\n    multiple: Boolean,\r\n    /** 显示序号 */\r\n    showNo: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    /** 不显示操作列 */\r\n    noOperation: Boolean,\r\n    /** 操作列宽度 */\r\n    operationWidth: [String, Number],\r\n    /** 不显示查询栏 */\r\n    noQuerybar: Boolean,\r\n    /** 不显示全屏按钮 */\r\n    noFullscreen: Boolean,\r\n    /** 不显示刷新按钮 */\r\n    noRefresh: Boolean,\r\n    /** 不显示头部 */\r\n    noHeader: Boolean,\r\n    /** 不显示底部 */\r\n    noFooter: Boolean,\r\n    /** 不包含搜索功能 */\r\n    noSearch: Boolean,\r\n    /** 不显示查询按钮图标 */\r\n    noSearchButtonIcon: Boolean,\r\n    /** 底部反转 */\r\n    footerReverse: Boolean,\r\n    /** 合并行列的方法 */\r\n    spanMethod: Function,\r\n    /** 加载中动画 */\r\n    loading: Boolean,\r\n    /** 加载中文本 */\r\n    loadingText: String,\r\n    /** 创建后执行一次查询 */\r\n    queryOnCreated: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('app/loading', { loadingText_: 'text', loadingBackground: 'background', loadingSpinner: 'spinner' }),\r\n    class_() {\r\n      return ['nm-list', this.fontSize ? `nm-list-${this.fontSize}` : '', this.fullscreen ? 'fullscreen' : '']\r\n    },\r\n    querybar() {\r\n      return {\r\n        model: this.model,\r\n        rules: this.rules,\r\n        inputWidth: this.inputWidth,\r\n        advanced: this.advanced,\r\n        noSearch: this.noSearch,\r\n        noSearchButtonIcon: this.noSearchButtonIcon\r\n      }\r\n    },\r\n    showLoading() {\r\n      return this.loading || this.loading_\r\n    }\r\n  },\r\n  methods: {\r\n    /** 查询方法 */\r\n    query() {\r\n      if (this.loading_) {\r\n        return\r\n      }\r\n\r\n      this.loading_ = true\r\n      let fullModel = Object.assign({}, this.model)\r\n\r\n      // 设置分页\r\n      fullModel.page = this.page\r\n\r\n      this.action(fullModel)\r\n        .then(data => {\r\n          this.rows = data.rows\r\n          this.total = data.total\r\n          // 回到顶部\r\n          this.$refs.table.scrollTop()\r\n          // 重新绘制布局\r\n          this.$refs.table.doLayout()\r\n          this.loading_ = false\r\n        })\r\n        .catch(() => {\r\n          this.loading_ = false\r\n        })\r\n    },\r\n    /** 刷新 */\r\n    refresh() {\r\n      this.page.index = 1\r\n      this.query()\r\n    },\r\n    /** 查询表单重置 */\r\n    reset(from) {\r\n      if (!from) {\r\n        this.$refs.querybar.reset()\r\n      } else {\r\n        this.$refs.table.clearSort()\r\n        this.page.index = 1\r\n      }\r\n    },\r\n    /** 获取序号 */\r\n    getNo(index) {\r\n      return (this.page.index - 1) * this.page.size + index + 1\r\n    }\r\n  },\r\n  created() {\r\n    if (this.queryOnCreated) {\r\n      this.query()\r\n    }\r\n  },\r\n  activated() {\r\n    // 重新绘制布局\r\n    this.$refs.table.doLayout()\r\n  }\r\n}\r\n</script>\r\n"]}]}