{"remainingRequest":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-ui\\packages\\components\\list\\components\\querybar\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-ui\\packages\\components\\list\\components\\querybar\\index.vue","mtime":1706623144435},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\babel-loader\\lib\\index.js","mtime":1706623138119},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js","mtime":1706623133543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpjb25zdCBkZWZhdWx0QWR2YW5jZWQgPSB7DQogIC8vIOaYr+WQpuW8gOWQrw0KICBlbmFibGVkOiBmYWxzZSwNCiAgLy8g5a695bqmDQogIHdpZHRoOiAnNDAwcHgnLA0KICAvLyDpq5jluqYNCiAgaGVpZ2h0OiAnJywNCiAgLy8g6KGo5Y2V5qCH562+5a695bqmDQogIGxhYmVsV2lkdGg6ICcxMDBweCcsDQogIC8vIOWGheiBlOihqOWNlQ0KICBpbmxpbmU6IGZhbHNlDQp9DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOaYr+WQpuaYvuekuumrmOe6p+afpeivog0KICAgICAgc2hvd0FkdmFuY2VkOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgcHJvcHM6IHsNCiAgICAvKiog6L6T5YWl5qGG55qE5a695bqmICovDQogICAgaW5wdXRXaWR0aDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJzE2MHB4Jw0KICAgIH0sDQogICAgLyoqIOafpeivouaooeWeiyAqLw0KICAgIG1vZGVsOiBPYmplY3QsDQogICAgLyoqIOmqjOivgeinhOWImSAqLw0KICAgIHJ1bGVzOiBPYmplY3QsDQogICAgLyoqIOmrmOe6p+afpeivouWxnuaApyAqLw0KICAgIGFkdmFuY2VkOiBPYmplY3QsDQogICAgLyoqIOS4jeaYvuekuuaMiemSruWbvuaghyAqLw0KICAgIG5vU2VhcmNoQnV0dG9uSWNvbjogQm9vbGVhbiwNCiAgICAvKiog5LiN6ZyA6KaB5p+l6K+iICovDQogICAgbm9TZWFyY2g6IEJvb2xlYW4sDQogICAgLyoq5LiN5pi+56S65p+l6K+i5oyJ6ZKuICovDQogICAgbm9SZXNldDogQm9vbGVhbiwNCiAgICAvKirmmL7npLrlr7zlh7rmjInpkq4gKi8NCiAgICBleHBvcnRFbmFibGVkOiBCb29sZWFuLA0KICAgIC8qKuWvvOWHuuaMiemSruadg+mZkOe8lueggSAqLw0KICAgIGV4cG9ydEJ0bkNvZGU6IFN0cmluZw0KICB9LA0KICBjb21wdXRlZDogew0KICAgIG1vZGVsXygpIHsNCiAgICAgIHJldHVybiB0aGlzLm1vZGVsIHx8IHt9DQogICAgfSwNCiAgICAvKiog6auY57qn5p+l6K+i6K6+572uICovDQogICAgYWR2YW5jZWRfKCkgew0KICAgICAgY29uc3QgYWQgPSB0aGlzLiRfLm1lcmdlKHt9LCBkZWZhdWx0QWR2YW5jZWQsIHRoaXMuYWR2YW5jZWQpDQogICAgICBhZC5lbmFibGVkID0gYWQuZW5hYmxlZCAmJiAhdGhpcy5ub1NlYXJjaA0KICAgICAgcmV0dXJuIGFkDQogICAgfSwNCiAgICAvKiog6auY57qn5p+l6K+i5qGG5qC35byPICovDQogICAgYWR2YW5jZWRTdHlsZSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHdpZHRoOiB0aGlzLmFkdmFuY2VkXy53aWR0aCwNCiAgICAgICAgaGVpZ2h0OiB0aGlzLmFkdmFuY2VkXy5oZWlnaHQNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBxdWVyeSgpIHsNCiAgICAgIHRoaXMuJHBhcmVudC5wYWdlLmluZGV4ID0gMQ0KICAgICAgdGhpcy4kcGFyZW50LnF1ZXJ5KCkNCiAgICB9LA0KICAgIC8qKiDooajljZXph43nva4gKi8NCiAgICByZXNldCgpIHsNCiAgICAgIGlmICh0aGlzLiRyZWZzLm5vcm1hbEZvcm0pIHsNCiAgICAgICAgdGhpcy4kcmVmcy5ub3JtYWxGb3JtLnJlc2V0KCkNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLiRyZWZzLmFkdmFuY2VkRm9ybSkgew0KICAgICAgICB0aGlzLiRyZWZzLmFkdmFuY2VkRm9ybS5yZXNldCgpDQogICAgICB9DQogICAgICB0aGlzLiRlbWl0KCdyZXNldCcpDQogICAgfSwNCiAgICB2YWxpZGF0ZShhY3Rpb24pIHsNCiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm5vcm1hbEZvcm0udmFsaWRhdGUoYWN0aW9uKQ0KICAgIH0sDQogICAgLyoqIOmrmOe6p+afpeivouaMiemSrueCueWHu+S6i+S7tiAqLw0KICAgIG9uQWR2YW5jZWRDbGljaygpIHsNCiAgICAgIHRoaXMuc2hvd0FkdmFuY2VkID0gIXRoaXMuc2hvd0FkdmFuY2VkDQoNCiAgICAgIGlmICh0aGlzLnNob3dBZHZhbmNlZCkgew0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgbGV0ICRib3ggPSB0aGlzLiRyZWZzLmFkdmFuY2VkQm94DQogICAgICAgICAgbGV0ICRhcnJvdyA9IHRoaXMuJHJlZnMuYXJyb3cNCiAgICAgICAgICBjb25zdCBib3hXaWR0aCA9ICRib3gub2Zmc2V0V2lkdGgNCiAgICAgICAgICBjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuJHJlZnMuc2hvd0Fkdm5hY2VkQnRuLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQ0KICAgICAgICAgIGxldCBsZWZ0ID0geCArIHdpZHRoIC8gMiAtICRib3gub2Zmc2V0V2lkdGggLyAyDQogICAgICAgICAgLy8g5Yik5pat5Y+z5L6n5pyJ5rKh5pyJ6LaF5Ye66aG16Z2iDQogICAgICAgICAgaWYgKGxlZnQgKyBib3hXaWR0aCA+IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgpIHsNCiAgICAgICAgICAgIGxlZnQgPSBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC0gYm94V2lkdGggLSAyMA0KICAgICAgICAgICAgLy8g6K6h566X566t5aS055qE5L2N572uDQogICAgICAgICAgICAkYXJyb3cuc3R5bGUubGVmdCA9IHggLSBsZWZ0IC0gMTAgKyB3aWR0aCAvIDIgKyAncHgnDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIOiuoeeul+eureWktOeahOS9jee9rg0KICAgICAgICAgICAgJGFycm93LnN0eWxlLmxlZnQgPSAkYm94Lm9mZnNldFdpZHRoIC8gMiArICdweCcNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAkYm94LnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4Jw0KICAgICAgICAgICRib3guc3R5bGUudG9wID0geSArIGhlaWdodCArIDE0ICsgJ3B4Jw0KDQogICAgICAgICAgLy8g6K6+572u6auY5bqmDQogICAgICAgICAgaWYgKCF0aGlzLmFkdmFuY2VkXy5oZWlnaHQpIHsNCiAgICAgICAgICAgIGNvbnN0IGJveEhlYWRlciA9ICRib3gucXVlcnlTZWxlY3RvcignLm5tLWJveC1oZWFkZXInKS5vZmZzZXRIZWlnaHQNCiAgICAgICAgICAgIGNvbnN0IGJveEZvb3RlciA9ICRib3gucXVlcnlTZWxlY3RvcignLm5tLWJveC1mb290ZXInKS5vZmZzZXRIZWlnaHQNCiAgICAgICAgICAgIGxldCBib3hIZWlnaHQgPSAkYm94LnF1ZXJ5U2VsZWN0b3IoJy5ubS1mb3JtJykub2Zmc2V0SGVpZ2h0ICsgYm94SGVhZGVyICsgYm94Rm9vdGVyICsgMjANCiAgICAgICAgICAgIGlmICghdGhpcy5hZHZhbmNlZF8uaW5saW5lKSB7DQogICAgICAgICAgICAgIGJveEhlaWdodCArPSAyMA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJGJveC5zdHlsZS5oZWlnaHQgPSBib3hIZWlnaHQgKyAncHgnDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgb25FeHBvcnQoKSB7DQogICAgICB0aGlzLiRwYXJlbnQudHJpZ2dlckV4cG9ydCgpDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgIHRoaXMuJHJlZnMubm9ybWFsRm9ybS4kZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4gew0KICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykgew0KICAgICAgICAgIHRoaXMucXVlcnkoKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgaWYgKHRoaXMuaW5wdXRXaWR0aCkgew0KICAgICAgICBsZXQgaW5wdXRzID0gdGhpcy4kcmVmcy5ub3JtYWxGb3JtLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCcuZWwtaW5wdXRfX2lubmVyJykNCiAgICAgICAgaWYgKGlucHV0cykgew0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpbnB1dHNbaV0uc3R5bGUud2lkdGggPSB0aGlzLmlucHV0V2lkdGgNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9KQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/netmodular-ui/packages/components/list/components/querybar","sourcesContent":["<template>\r\n  <!--工具栏-->\r\n  <section class=\"nm-list-querybar\">\r\n    <nm-form ref=\"normalForm\" class=\"nm-list-querybar-normal\" :model=\"model_\" :rules=\"rules\" :size=\"fontSize\" :inline=\"true\">\r\n      <slot />\r\n      <el-form-item v-if=\"!noSearch\">\r\n        <nm-button type=\"primary\" @click=\"query\" :icon=\"!noSearchButtonIcon ? 'search' : ''\" text=\"查询\" />\r\n      </el-form-item>\r\n      <el-form-item v-if=\"!noReset\">\r\n        <nm-button type=\"info\" @click=\"reset\" :icon=\"!noSearchButtonIcon ? 'refresh' : ''\" text=\"重置\" />\r\n      </el-form-item>\r\n      <el-form-item v-if=\"exportEnabled\" v-nm-has=\"exportBtnCode\">\r\n        <nm-button type=\"primary\" @click=\"onExport\" icon=\"export\" text=\"导出\" />\r\n      </el-form-item>\r\n      <el-form-item v-if=\"advanced_.enabled\">\r\n        <nm-button ref=\"showAdvnacedBtn\" type=\"warning\" @click=\"onAdvancedClick\">\r\n          高级查询\r\n          <i class=\"el-icon--right\" :class=\"[showAdvanced ? 'el-icon-arrow-up' : 'el-icon-arrow-down']\"></i>\r\n        </nm-button>\r\n      </el-form-item>\r\n      <!--自定义按钮插槽-->\r\n      <el-form-item>\r\n        <slot name=\"buttons\" />\r\n      </el-form-item>\r\n    </nm-form>\r\n\r\n    <!--高级查询框-->\r\n    <transition name=\"el-zoom-in-top\">\r\n      <section ref=\"advancedBox\" class=\"nm-list-querybar-advanced\" v-if=\"advanced_.enabled\" v-show=\"showAdvanced\" :style=\"advancedStyle\">\r\n        <nm-box page header footer title=\"高级查询\" icon=\"search\">\r\n          <template v-slot:toolbar>\r\n            <nm-button icon=\"close\" @click=\"showAdvanced = false\" />\r\n          </template>\r\n          <!--查询条件-->\r\n          <nm-form ref=\"advancedForm\" :model=\"model_\" :rules=\"rules\" :label-width=\"advanced_.labelWidth\" :inline=\"advanced_.inline\">\r\n            <slot name=\"advanced\" />\r\n          </nm-form>\r\n          <template v-slot:footer>\r\n            <!--查询按钮-->\r\n            <nm-button type=\"primary\" @click=\"query\" text=\"查询\" :icon=\"!noSearchButtonIcon ? 'search' : ''\" />\r\n            <!--重置按钮-->\r\n            <nm-button type=\"info\" @click=\"reset\" text=\"重置\" :icon=\"!noSearchButtonIcon ? 'refresh' : ''\" />\r\n          </template>\r\n        </nm-box>\r\n        <div ref=\"arrow\" class=\"advanced-arrow\" />\r\n      </section>\r\n    </transition>\r\n  </section>\r\n</template>\r\n<script>\r\nconst defaultAdvanced = {\r\n  // 是否开启\r\n  enabled: false,\r\n  // 宽度\r\n  width: '400px',\r\n  // 高度\r\n  height: '',\r\n  // 表单标签宽度\r\n  labelWidth: '100px',\r\n  // 内联表单\r\n  inline: false\r\n}\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 是否显示高级查询\r\n      showAdvanced: false\r\n    }\r\n  },\r\n  props: {\r\n    /** 输入框的宽度 */\r\n    inputWidth: {\r\n      type: String,\r\n      default: '160px'\r\n    },\r\n    /** 查询模型 */\r\n    model: Object,\r\n    /** 验证规则 */\r\n    rules: Object,\r\n    /** 高级查询属性 */\r\n    advanced: Object,\r\n    /** 不显示按钮图标 */\r\n    noSearchButtonIcon: Boolean,\r\n    /** 不需要查询 */\r\n    noSearch: Boolean,\r\n    /**不显示查询按钮 */\r\n    noReset: Boolean,\r\n    /**显示导出按钮 */\r\n    exportEnabled: Boolean,\r\n    /**导出按钮权限编码 */\r\n    exportBtnCode: String\r\n  },\r\n  computed: {\r\n    model_() {\r\n      return this.model || {}\r\n    },\r\n    /** 高级查询设置 */\r\n    advanced_() {\r\n      const ad = this.$_.merge({}, defaultAdvanced, this.advanced)\r\n      ad.enabled = ad.enabled && !this.noSearch\r\n      return ad\r\n    },\r\n    /** 高级查询框样式 */\r\n    advancedStyle() {\r\n      return {\r\n        width: this.advanced_.width,\r\n        height: this.advanced_.height\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    query() {\r\n      this.$parent.page.index = 1\r\n      this.$parent.query()\r\n    },\r\n    /** 表单重置 */\r\n    reset() {\r\n      if (this.$refs.normalForm) {\r\n        this.$refs.normalForm.reset()\r\n      }\r\n      if (this.$refs.advancedForm) {\r\n        this.$refs.advancedForm.reset()\r\n      }\r\n      this.$emit('reset')\r\n    },\r\n    validate(action) {\r\n      return this.$refs.normalForm.validate(action)\r\n    },\r\n    /** 高级查询按钮点击事件 */\r\n    onAdvancedClick() {\r\n      this.showAdvanced = !this.showAdvanced\r\n\r\n      if (this.showAdvanced) {\r\n        this.$nextTick(() => {\r\n          let $box = this.$refs.advancedBox\r\n          let $arrow = this.$refs.arrow\r\n          const boxWidth = $box.offsetWidth\r\n          const { x, y, width, height } = this.$refs.showAdvnacedBtn.$el.getBoundingClientRect()\r\n          let left = x + width / 2 - $box.offsetWidth / 2\r\n          // 判断右侧有没有超出页面\r\n          if (left + boxWidth > document.body.offsetWidth) {\r\n            left = document.body.offsetWidth - boxWidth - 20\r\n            // 计算箭头的位置\r\n            $arrow.style.left = x - left - 10 + width / 2 + 'px'\r\n          } else {\r\n            // 计算箭头的位置\r\n            $arrow.style.left = $box.offsetWidth / 2 + 'px'\r\n          }\r\n\r\n          $box.style.left = left + 'px'\r\n          $box.style.top = y + height + 14 + 'px'\r\n\r\n          // 设置高度\r\n          if (!this.advanced_.height) {\r\n            const boxHeader = $box.querySelector('.nm-box-header').offsetHeight\r\n            const boxFooter = $box.querySelector('.nm-box-footer').offsetHeight\r\n            let boxHeight = $box.querySelector('.nm-form').offsetHeight + boxHeader + boxFooter + 20\r\n            if (!this.advanced_.inline) {\r\n              boxHeight += 20\r\n            }\r\n            $box.style.height = boxHeight + 'px'\r\n          }\r\n        })\r\n      }\r\n    },\r\n    onExport() {\r\n      this.$parent.triggerExport()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.$refs.normalForm.$el.addEventListener('keydown', e => {\r\n        if (e.keyCode === 13) {\r\n          this.query()\r\n        }\r\n      })\r\n      if (this.inputWidth) {\r\n        let inputs = this.$refs.normalForm.$el.querySelectorAll('.el-input__inner')\r\n        if (inputs) {\r\n          for (let i = 0; i < inputs.length; i++) {\r\n            inputs[i].style.width = this.inputWidth\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n"]}]}