{"remainingRequest":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-module-admin\\src\\views\\menu\\index\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-module-admin\\src\\views\\menu\\index\\index.vue","mtime":1706623138826},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\babel-loader\\lib\\index.js","mtime":1706623138119},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js","mtime":1706623133543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcGFnZSBmcm9tICcuL3BhZ2UnDQppbXBvcnQgY29scyBmcm9tICcuL2NvbHMuanMnDQppbXBvcnQgQWRkUGFnZSBmcm9tICcuLi9jb21wb25lbnRzL2FkZCcNCmltcG9ydCBFZGl0UGFnZSBmcm9tICcuLi9jb21wb25lbnRzL2VkaXQnDQppbXBvcnQgTWVudVRyZWUgZnJvbSAnLi4vY29tcG9uZW50cy90cmVlJw0KDQovLyDmjqXlj6MNCmNvbnN0IGFwaSA9ICRhcGkuYWRtaW4ubWVudQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6IHBhZ2UubmFtZSwNCiAgY29tcG9uZW50czogeyBNZW51VHJlZSwgQWRkUGFnZSwgRWRpdFBhZ2UgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc3BsaXQ6IDAuMiwNCiAgICAgIGN1cnI6IHsgaWQ6ICcnIH0sDQogICAgICBsaXN0OiB7DQogICAgICAgIGNvbHMsDQogICAgICAgIGFjdGlvbjogYXBpLnF1ZXJ5LA0KICAgICAgICBsYWJlbFdpZHRoOiAnNjBweCcsDQogICAgICAgIG1vZGVsOiB7DQogICAgICAgICAgcGFyZW50SWQ6ICcnLA0KICAgICAgICAgIG5hbWU6ICcnLA0KICAgICAgICAgIGNvZGU6ICcnDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICByZW1vdmU6IGFwaS5yZW1vdmUsDQogICAgICAvLyDlvZPliY3mlbDph48NCiAgICAgIHRvdGFsOiAwLA0KICAgICAgLy8g5by55Ye65qGGDQogICAgICBkaWFsb2c6IHsNCiAgICAgICAgYWRkOiBmYWxzZSwNCiAgICAgICAgZWRpdDogZmFsc2UsDQogICAgICAgIC8vIOaOkuW6jw0KICAgICAgICBzb3J0OiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIC8vIOW3puS+p+iPnOWNleagkemAieaLqeeahOiPnOWNlQ0KICAgICAgbWVudTogew0KICAgICAgICBpZDogJycsDQogICAgICAgIG5hbWU6ICcnLA0KICAgICAgICBwYXRoOiAnJw0KICAgICAgfSwNCiAgICAgIGJ1dHRvbnM6IHBhZ2UuYnV0dG9ucywNCiAgICAgIGRyYWdTb3J0OiB7DQogICAgICAgIHF1ZXJ5QWN0aW9uOiB0aGlzLnF1ZXJ5U29ydExpc3QsDQogICAgICAgIHVwZGF0ZUFjdGlvbjogYXBpLnVwZGF0ZVNvcnRMaXN0LA0KICAgICAgICBoZWlnaHQ6ICc3MDBweCcNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgdGl0bGUoKSB7DQogICAgICByZXR1cm4gJ+iPnOWNleWIl+ihqOKAlCcgKyB0aGlzLm1lbnUubmFtZQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHJlZnJlc2goKSB7DQogICAgICB0aGlzLmxpc3QubW9kZWwucGFyZW50SWQgPSB0aGlzLm1lbnUuaWQNCiAgICAgIHRoaXMuJHJlZnMubGlzdC5yZWZyZXNoKCkNCiAgICB9LA0KICAgIG9uVHJlZUNoYW5nZSh7IGlkLCBsYWJlbCwgcGF0aCwgaXRlbSB9KSB7DQogICAgICB0aGlzLm1lbnUuaWQgPSBpZA0KICAgICAgdGhpcy5tZW51Lm5hbWUgPSBsYWJlbA0KICAgICAgLy/mmK/lkKbmmK/oioLngrnoj5zljZUNCiAgICAgIHRoaXMubWVudS5pc05vZGUgPSBpdGVtLnR5cGUgPT09IDANCiAgICAgIHRoaXMubWVudS5wYXRoID0gcGF0aC5qb2luKCcgLyAnKQ0KICAgICAgdGhpcy5yZWZyZXNoKCkNCiAgICB9LA0KICAgIGFkZCh0b3RhbCkgew0KICAgICAgdGhpcy50b3RhbCA9IHRvdGFsDQogICAgICB0aGlzLmRpYWxvZy5hZGQgPSB0cnVlDQogICAgfSwNCiAgICBlZGl0KHJvdykgew0KICAgICAgdGhpcy5jdXJyID0gcm93DQogICAgICB0aGlzLmRpYWxvZy5lZGl0ID0gdHJ1ZQ0KICAgIH0sDQogICAgcXVlcnlTb3J0TGlzdCgpIHsNCiAgICAgIHJldHVybiBhcGkucXVlcnlTb3J0TGlzdCh0aGlzLm1lbnUuaWQpDQogICAgfSwNCiAgICBvcGVuU29ydCgpIHsNCiAgICAgIHRoaXMuZGlhbG9nLnNvcnQgPSB0cnVlDQogICAgfSwNCiAgICBvbkFkZChtb2RlbCkgew0KICAgICAgdGhpcy4kcmVmcy50cmVlLmluc2VydChtb2RlbCkNCiAgICAgIHRoaXMucmVmcmVzaCgpDQogICAgfSwNCiAgICBvbkRlbGV0ZShpZCkgew0KICAgICAgdGhpcy4kcmVmcy50cmVlLnJlbW92ZShpZCkNCiAgICAgIHRoaXMucmVmcmVzaCgpDQogICAgfSwNCiAgICBvbkVkaXQobW9kZWwpIHsNCiAgICAgIHRoaXMuJHJlZnMudHJlZS51cGRhdGUobW9kZWwpDQogICAgICB0aGlzLnJlZnJlc2goKQ0KICAgIH0sDQogICAgb25Tb3J0KGRhdGEpIHsNCiAgICAgIHRoaXMuJHJlZnMudHJlZS5zb3J0KGRhdGEpDQogICAgICB0aGlzLnJlZnJlc2goKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA0EA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/netmodular-module-admin/src/views/menu/index","sourcesContent":["<template>\r\n  <nm-container>\r\n    <nm-split v-model=\"split\">\r\n      <template v-slot:left>\r\n        <menu-tree ref=\"tree\" @change=\"onTreeChange\" />\r\n      </template>\r\n      <template v-slot:right>\r\n        <nm-list ref=\"list\" :title=\"title\" v-bind=\"list\">\r\n          <!--查询条件-->\r\n          <template v-slot:querybar>\r\n            <el-form-item label=\"名称：\" prop=\"name\">\r\n              <el-input v-model=\"list.model.name\" clearable />\r\n            </el-form-item>\r\n            <el-form-item label=\"编码：\" prop=\"code\">\r\n              <el-input v-model=\"list.model.code\" clearable />\r\n            </el-form-item>\r\n          </template>\r\n\r\n          <!--按钮-->\r\n          <template v-slot:querybar-buttons=\"{ total }\">\r\n            <nm-button :disabled=\"!menu.isNode\" v-bind=\"buttons.add\" @click=\"add(total)\" />\r\n            <nm-button :disabled=\"!menu.isNode\" v-bind=\"buttons.sort\" @click=\"openSort\" />\r\n          </template>\r\n\r\n          <!--类型-->\r\n          <template v-slot:col-typeName=\"{ row }\">\r\n            <el-tag type=\"success\" v-if=\"row.type === 0\">{{ row.typeName }}</el-tag>\r\n            <el-tag type=\"warning\" v-if=\"row.type === 1\">{{ row.typeName }}</el-tag>\r\n            <el-tag v-if=\"row.type === 2\">{{ row.typeName }}</el-tag>\r\n          </template>\r\n\r\n          <!--图标-->\r\n          <template v-slot:col-icon=\"{ row }\">\r\n            <el-tooltip :content=\"row.icon\" effect=\"dark\" placement=\"right\" v-if=\"row.icon\">\r\n              <label>\r\n                <nm-icon :name=\"row.icon\" size=\"20px\" />\r\n              </label>\r\n            </el-tooltip>\r\n            <label v-else>无</label>\r\n          </template>\r\n\r\n          <!--是否显示-->\r\n          <template v-slot:col-show=\"{ row }\">{{ row.show ? '是' : '否' }}</template>\r\n\r\n          <!--操作列-->\r\n          <template v-slot:col-operation=\"{ row }\">\r\n            <el-dropdown trigger=\"click\">\r\n              <span class=\"el-dropdown-link\">\r\n                操作\r\n                <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n              </span>\r\n              <el-dropdown-menu class=\"nm-list-operation-dropdown\" slot=\"dropdown\">\r\n                <el-dropdown-item>\r\n                  <nm-button v-bind=\"buttons.edit\" @click=\"edit(row)\" />\r\n                </el-dropdown-item>\r\n                <el-dropdown-item>\r\n                  <nm-button-delete v-bind=\"buttons.del\" :action=\"remove\" :id=\"row.id\" @success=\"onDelete(row.id)\" />\r\n                </el-dropdown-item>\r\n              </el-dropdown-menu>\r\n            </el-dropdown>\r\n          </template>\r\n        </nm-list>\r\n      </template>\r\n    </nm-split>\r\n\r\n    <!--添加菜单-->\r\n    <add-page :parent=\"menu\" :sort=\"total\" :visible.sync=\"dialog.add\" @success=\"onAdd\" />\r\n    <!--编辑菜单-->\r\n    <edit-page :parent=\"menu\" :id=\"curr.id\" :visible.sync=\"dialog.edit\" @success=\"onEdit\" />\r\n    <!--排序-->\r\n    <nm-drag-sort-dialog v-bind=\"dragSort\" :visible.sync=\"dialog.sort\" @success=\"onSort\" />\r\n  </nm-container>\r\n</template>\r\n<script>\r\nimport page from './page'\r\nimport cols from './cols.js'\r\nimport AddPage from '../components/add'\r\nimport EditPage from '../components/edit'\r\nimport MenuTree from '../components/tree'\r\n\r\n// 接口\r\nconst api = $api.admin.menu\r\n\r\nexport default {\r\n  name: page.name,\r\n  components: { MenuTree, AddPage, EditPage },\r\n  data() {\r\n    return {\r\n      split: 0.2,\r\n      curr: { id: '' },\r\n      list: {\r\n        cols,\r\n        action: api.query,\r\n        labelWidth: '60px',\r\n        model: {\r\n          parentId: '',\r\n          name: '',\r\n          code: ''\r\n        }\r\n      },\r\n      remove: api.remove,\r\n      // 当前数量\r\n      total: 0,\r\n      // 弹出框\r\n      dialog: {\r\n        add: false,\r\n        edit: false,\r\n        // 排序\r\n        sort: false\r\n      },\r\n      // 左侧菜单树选择的菜单\r\n      menu: {\r\n        id: '',\r\n        name: '',\r\n        path: ''\r\n      },\r\n      buttons: page.buttons,\r\n      dragSort: {\r\n        queryAction: this.querySortList,\r\n        updateAction: api.updateSortList,\r\n        height: '700px'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    title() {\r\n      return '菜单列表—' + this.menu.name\r\n    }\r\n  },\r\n  methods: {\r\n    refresh() {\r\n      this.list.model.parentId = this.menu.id\r\n      this.$refs.list.refresh()\r\n    },\r\n    onTreeChange({ id, label, path, item }) {\r\n      this.menu.id = id\r\n      this.menu.name = label\r\n      //是否是节点菜单\r\n      this.menu.isNode = item.type === 0\r\n      this.menu.path = path.join(' / ')\r\n      this.refresh()\r\n    },\r\n    add(total) {\r\n      this.total = total\r\n      this.dialog.add = true\r\n    },\r\n    edit(row) {\r\n      this.curr = row\r\n      this.dialog.edit = true\r\n    },\r\n    querySortList() {\r\n      return api.querySortList(this.menu.id)\r\n    },\r\n    openSort() {\r\n      this.dialog.sort = true\r\n    },\r\n    onAdd(model) {\r\n      this.$refs.tree.insert(model)\r\n      this.refresh()\r\n    },\r\n    onDelete(id) {\r\n      this.$refs.tree.remove(id)\r\n      this.refresh()\r\n    },\r\n    onEdit(model) {\r\n      this.$refs.tree.update(model)\r\n      this.refresh()\r\n    },\r\n    onSort(data) {\r\n      this.$refs.tree.sort(data)\r\n      this.refresh()\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}