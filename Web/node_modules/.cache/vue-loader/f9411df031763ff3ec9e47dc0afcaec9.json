{"remainingRequest":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-ui\\packages\\components\\list\\components\\export\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\netmodular-ui\\packages\\components\\list\\components\\export\\index.vue","mtime":1706623144427},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\babel-loader\\lib\\index.js","mtime":1706623138119},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1706623138253},{"path":"E:\\NetModular.CodeGenerator\\src\\UI\\module-codegenerator\\node_modules\\vue-loader\\lib\\index.js","mtime":1706623133543}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgZGlhbG9nIGZyb20gJy4uLy4uLy4uLy4uL21peGlucy9jb21wb25lbnRzL2RpYWxvZycNCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbWl4aW5zOiBbZGlhbG9nXSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGl0bGU6ICflr7zlh7rmlbDmja4nLA0KICAgICAgaWNvbjogJ2V4cG9ydCcsDQogICAgICB3aWR0aDogJzgwMHB4JywNCiAgICAgIGhlaWdodDogJzUwMHB4JywNCiAgICAgIG1vZGVsOiB7DQogICAgICAgIGNvbHVtbnM6IFtdLA0KICAgICAgICBzaG93VGl0bGU6IHRydWUsDQogICAgICAgIHRpdGxlOiAnJywNCiAgICAgICAgZmlsZU5hbWU6ICcnLA0KICAgICAgICBmb3JtYXQ6IDAsDQogICAgICAgIG1vZGU6IDAsDQogICAgICAgIHNob3dDb3B5cmlnaHQ6IGZhbHNlLA0KICAgICAgICBzaG93Q29sTmFtZTogdHJ1ZSwNCiAgICAgICAgc2hvd0V4cG9ydERhdGU6IGZhbHNlLA0KICAgICAgICBzaG93RXhwb3J0UGVvcGxlOiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHRpdGxlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeagh+mimCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLA0KICAgICAgICBmaWxlTmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmlofku7blkI3np7AnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XQ0KICAgICAgfSwNCiAgICAgIGNvbHVtbnM6IFtdDQogICAgfQ0KICB9LA0KICBwcm9wczogew0KICAgIGNvbHM6IEFycmF5LA0KICAgIC8qKuWvvOWHuuaYvuekuuaooeW8jyAqLw0KICAgIG9wdGlvbnM6IE9iamVjdA0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKCdhcHAvY29uZmlnJywgeyBjb3B5cmlnaHQ6IHMgPT4gcy5zeXN0ZW0uY29weXJpZ2h0IH0pLA0KICAgIGV4dCgpIHsNCiAgICAgIHJldHVybiAnLnhsc3gnDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyoq5Yid5aeL5YyWICovDQogICAgaW5pdCgpIHsNCiAgICAgIGNvbnN0IHsgdGl0bGUsIGZvcm1hdCwgbW9kZSwgc2hvd1RpdGxlLCBzaG93Q29weXJpZ2h0LCBzaG93Q29sTmFtZSwgc2hvd0V4cG9ydERhdGUsIHNob3dFeHBvcnRQZW9wbGUgfSA9IHRoaXMub3B0aW9ucw0KDQogICAgICB0aGlzLm1vZGVsLnRpdGxlID0gdGl0bGUNCiAgICAgIHRoaXMubW9kZWwuZmlsZU5hbWUgPSBgJHt0aXRsZX1fJHt0aGlzLiRkYXlqcygpLmZvcm1hdCgnWVlZWU1NRERISG1tc3MnKX1gDQogICAgICB0aGlzLm1vZGVsLmZvcm1hdCA9IGZvcm1hdA0KICAgICAgdGhpcy5tb2RlbC5tb2RlID0gbW9kZQ0KICAgICAgdGhpcy5tb2RlbC5zaG93VGl0bGUgPSBzaG93VGl0bGUNCiAgICAgIHRoaXMubW9kZWwuc2hvd0NvcHlyaWdodCA9IHNob3dDb3B5cmlnaHQNCiAgICAgIHRoaXMubW9kZWwuc2hvd0NvbE5hbWUgPSBzaG93Q29sTmFtZQ0KICAgICAgdGhpcy5tb2RlbC5zaG93RXhwb3J0RGF0ZSA9IHNob3dFeHBvcnREYXRlDQogICAgICB0aGlzLm1vZGVsLnNob3dFeHBvcnRQZW9wbGUgPSBzaG93RXhwb3J0UGVvcGxlDQogICAgICB0aGlzLmNvbHVtbnMgPSB0aGlzLmNvbHMubWFwKG0gPT4gew0KICAgICAgICBsZXQgY29sID0gdGhpcy4kcGFyZW50Lmxpc3RDb2wyRXhwb3J0Q29sKG0pDQogICAgICAgIC8v5oqK5bey5pi+56S655qE5Yqg5Yiw6YCJ5Lit5YiX6KGoDQogICAgICAgIGlmIChtLnNob3cpIHsNCiAgICAgICAgICB0aGlzLm1vZGVsLmNvbHVtbnMucHVzaChjb2wpDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGNvbA0KICAgICAgfSkNCg0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAvL+iuvue9ruW3sumAieaLqeeahOWIlw0KICAgICAgICB0aGlzLm1vZGVsLmNvbHVtbnMubWFwKG0gPT4gew0KICAgICAgICAgIHRoaXMuJHJlZnMudGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKG0pDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgb25TZWxlY3Rpb25DaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLm1vZGVsLmNvbHVtbnMgPSB2YWwNCiAgICB9LA0KICAgIG9uRXhwb3J0KCkgew0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgdGhpcy4kcGFyZW50LmV4cG9ydF8odGhpcy5tb2RlbCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5pbml0KCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/netmodular-ui/packages/components/list/components/export","sourcesContent":["<template>\r\n  <component v-bind:is=\"`nm-${options.showMode || 'drawer'}`\" header footer draggable :padding=\"10\" :title=\"title\" :icon=\"icon\" :width=\"width\" :height=\"height\" :visible.sync=\"visible_\">\r\n    <el-form ref=\"form\" :model=\"model\" :rules=\"rules\" :size=\"fontSize\" label-width=\"120px\">\r\n      <el-form-item label=\"显示标题：\" prop=\"showTitle\">\r\n        <el-switch v-model=\"model.showTitle\"> </el-switch>\r\n      </el-form-item>\r\n      <el-form-item v-if=\"model.showTitle\" label=\"标题内容：\" prop=\"title\">\r\n        <el-input v-model=\"model.title\" clearable> </el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"文件名称：\" prop=\"fileName\">\r\n        <el-input v-model=\"model.fileName\">\r\n          <template slot=\"append\">{{ ext }}</template>\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"导出格式：\" prop=\"format\">\r\n        <el-radio-group v-model=\"model.format\">\r\n          <el-radio :label=\"0\">xlsx</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"导出模式：\" prop=\"mode\">\r\n        <el-radio-group v-model=\"model.mode\">\r\n          <el-radio :label=\"0\">当前条件所有数据</el-radio>\r\n          <el-radio :label=\"1\">当前页数据</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"设置列：\">\r\n        <el-table ref=\"table\" :data=\"columns\" border stripe size=\"mini\" max-height=\"400\" @selection-change=\"onSelectionChange\">\r\n          <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\r\n          <el-table-column prop=\"name\" label=\"字段\"></el-table-column>\r\n          <el-table-column prop=\"label\" label=\"列名\">\r\n            <template v-slot=\"{ row }\">\r\n              <el-input v-model=\"row.label\" />\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"width\">\r\n            <template slot=\"header\"\r\n              >宽度 <el-tooltip effect=\"dark\" content=\"0表示自适应\" placement=\"top\"> <i class=\"el-icon-info nm-size-15 nm-text-warning\"> </i></el-tooltip\r\n            ></template>\r\n            <template v-slot=\"{ row }\">\r\n              <el-input type=\"number\" v-model.number=\"row.width\" />\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"align\" label=\"对齐方式\">\r\n            <template v-slot=\"{ row }\">\r\n              <el-select v-model=\"row.align\" placeholder=\"请选择\">\r\n                <el-option label=\"居左\" value=\"left\"> </el-option>\r\n                <el-option label=\"居中\" value=\"center\"> </el-option>\r\n                <el-option label=\"居右\" value=\"right\"> </el-option>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"format\">\r\n            <template slot=\"header\"\r\n              >格式化 <el-tooltip effect=\"dark\" content=\"如日期：yyyy-MM-dd\" placement=\"top\"> <i class=\"el-icon-info nm-size-15 nm-text-warning\"> </i></el-tooltip\r\n            ></template>\r\n            <template v-slot=\"{ row }\">\r\n              <el-input v-model=\"row.format\" />\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-form-item>\r\n      <el-collapse>\r\n        <el-collapse-item>\r\n          <template slot=\"title\"\r\n            ><span class=\"nm-p-l-10\">\r\n              <i class=\"el-icon-s-tools nm-size-16\" style=\"position: relative;top: 2px;\"></i>\r\n              高级选项</span\r\n            >\r\n          </template>\r\n          <el-row>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"显示列名：\" prop=\"showColName\">\r\n                <el-switch v-model=\"model.showColName\"> </el-switch>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"显示导出日期：\" prop=\"showExportDate\">\r\n                <el-switch v-model=\"model.showExportDate\"> </el-switch>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"显示导出人：\" prop=\"showExportPeople\">\r\n                <el-switch v-model=\"model.showExportPeople\"> </el-switch>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"显示版权：\" prop=\"showCopyright\">\r\n            <el-switch v-model=\"model.showCopyright\"> </el-switch>\r\n          </el-form-item>\r\n          <el-form-item v-if=\"model.showCopyright\" label=\"版权信息：\" prop=\"copyright\">\r\n            <el-input :value=\"copyright\" disabled />\r\n          </el-form-item>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </el-form>\r\n\r\n    <!--底部-->\r\n    <template v-slot:footer>\r\n      <nm-button type=\"success\" text=\"导出\" @click=\"onExport\" />\r\n      <nm-button type=\"info\" text=\"取消\" @click=\"hide\" />\r\n    </template>\r\n  </component>\r\n</template>\r\n<script>\r\nimport dialog from '../../../../mixins/components/dialog'\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  mixins: [dialog],\r\n  data() {\r\n    return {\r\n      title: '导出数据',\r\n      icon: 'export',\r\n      width: '800px',\r\n      height: '500px',\r\n      model: {\r\n        columns: [],\r\n        showTitle: true,\r\n        title: '',\r\n        fileName: '',\r\n        format: 0,\r\n        mode: 0,\r\n        showCopyright: false,\r\n        showColName: true,\r\n        showExportDate: false,\r\n        showExportPeople: false\r\n      },\r\n      rules: {\r\n        title: [{ required: true, message: '请输入标题', trigger: 'change' }],\r\n        fileName: [{ required: true, message: '请输入文件名称', trigger: 'change' }]\r\n      },\r\n      columns: []\r\n    }\r\n  },\r\n  props: {\r\n    cols: Array,\r\n    /**导出显示模式 */\r\n    options: Object\r\n  },\r\n  computed: {\r\n    ...mapState('app/config', { copyright: s => s.system.copyright }),\r\n    ext() {\r\n      return '.xlsx'\r\n    }\r\n  },\r\n  methods: {\r\n    /**初始化 */\r\n    init() {\r\n      const { title, format, mode, showTitle, showCopyright, showColName, showExportDate, showExportPeople } = this.options\r\n\r\n      this.model.title = title\r\n      this.model.fileName = `${title}_${this.$dayjs().format('YYYYMMDDHHmmss')}`\r\n      this.model.format = format\r\n      this.model.mode = mode\r\n      this.model.showTitle = showTitle\r\n      this.model.showCopyright = showCopyright\r\n      this.model.showColName = showColName\r\n      this.model.showExportDate = showExportDate\r\n      this.model.showExportPeople = showExportPeople\r\n      this.columns = this.cols.map(m => {\r\n        let col = this.$parent.listCol2ExportCol(m)\r\n        //把已显示的加到选中列表\r\n        if (m.show) {\r\n          this.model.columns.push(col)\r\n        }\r\n        return col\r\n      })\r\n\r\n      this.$nextTick(() => {\r\n        //设置已选择的列\r\n        this.model.columns.map(m => {\r\n          this.$refs.table.toggleRowSelection(m)\r\n        })\r\n      })\r\n    },\r\n    onSelectionChange(val) {\r\n      this.model.columns = val\r\n    },\r\n    onExport() {\r\n      this.$refs.form.validate(async valid => {\r\n        if (valid) {\r\n          this.$parent.export_(this.model)\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  }\r\n}\r\n</script>\r\n"]}]}